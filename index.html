<!doctype html>
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<title>Barbara's Cloth Pattern Tester</title>
		<link rel="icon" type="image/png" href="pat1.png"/>
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200&family=Roboto&family=Roboto+Mono&display=swap" rel="stylesheet">
		<style>
			body {
				background-color:#DAB983;
				font-family:'Poppins',sans-serif;
				font-family:'Roboto',sans-serif;
				font-family:'Roboto Mono',monospace;
			}
			button {
				background:none;
				border:none;
				cursor:pointer;
				color:#8C5F37;
			}

			#div1 {
				width:800px;
				height:800px;
				background-image:url("pat0.png");
				border-radius:20px;
				box-shadow:0 0 7px rgba(0, 0, 0, 0.5);
				transition:0.5s;
				
			}

			#div2 {
				width:800px;
				height:800px;
				position:fixed;
				top:8px;
				left:8px;
				background-image:url("front.png");
				border-radius:20px;
				transition:2s;
			}

			#div3 {
				position:fixed;
				top:8px;
				right:5%;
			}

			#div4 {
				width:800px;
				height:800px;
				position:fixed;
				top:8px;
				left:8px;
				background:none;
				border-radius:20px;
			}

			#input2{
				background:none;
				border:solid 1px #8C5F37;
				border-radius:5px;
			}

			table,
			tbody,
			tr,
			td {
				text-align:center;
				vertical-align:bottom;
			}

			.input-div {
				color:#8C5F37;
				width:100%;
				height:200px;
				border-radius:20px;
				display:flex;
				justify-content:center;
				align-items:center;
				text-align:center;
				border:dashed 2px #8C5F37;
				background-color:rgba(255, 255, 255, 0.2);
				position:relative;
			}

			.file {
				width:100%;
				height:100%;
				position:absolute;
				opacity:0;
				cursor:pointer;
			}

			.samp {
				height:50px;
				width:auto;
				border-radius:10px;
				border:1px solid #8C5F37;
			}

			.sp1 {
				color:#8C5F37;
				font-size:20px;
				border:1px solid #8C5F37;
				padding:10px 15px 10px 15px;
				border-radius:10px;
				user-select:none;
				cursor:pointer;
				transition:0.5s;
			}

			.sp1:hover {
				color:#DAB983;
				background:#8C5F37;
			}

			a{color:#8C5F37;}
			a:link{text-decoration:none;}
			a:visited{text-decoration:none;}
			a:hover{text-decoration:none;}
			a:active{text-decoration:none;}
		</style>
	</head>
	<body>
		<div id="div1"></div>
		<div id="div2"></div>
		<div id="div3"><br><span style="font-size:24px;">Barbara's Cloth Pattern Tester</span><br>
		<div id="div4" onwheel="myWheel(event)"></div>
		<span style="color:#8C5F37;">バーバラの布パターンテスター</span><br>
		<br>
			<table>
				<tbody>
					<tr>
						<td><button id="but1"><img src="pat1.png" class="samp" /><br><span style="color:black">Pattern 1</span><br>サンプル 1</button></td>
						<td><button id="but2"><img src="pat2.png" class="samp" /><br><span style="color:black">Pattern 2</span><br>サンプル 2</button></td>
						<td><button id="but3"><img src="pat3.png" class="samp" /><br><span style="color:black">Pattern 3</span><br>サンプル 3</button></td>
					</tr>
				</tbody>
			</table><br>
			<div class="input-div">
				<p><img src="upload.png" width="50px" height="50px"/><br>Drag &amp; drop pattern here<br><span>ここに写真をドラッグアンドドロップします</span></p><input type="file" class="file" multiple="multiple" accept="image/jpeg, image/png, image/jpg">
			</div>
			<br>
			Pattern URL <input type="text" id="input2"></input><button id="ok1">OK</button><br>
			<br>
			<table>
			<tbody>
			<tr>
			<td style="text-align:left;padding-right:10px;">Change pattern size<br><span style="color:#8C5F37;">パターンサイズの変更</span></td><td style="vertical-align:middle;"><span class="sp1" id="smaller">-</span></td><td style="vertical-align:middle;"><span class="sp1" id="bigger">+</span></td>
			</tr>
			</tbody>
			</table><br>
			<span class="sp1" id="froback" style="font-size:1em;">Back view</span>
			<br>
			<br>
			<br>
			Ressources<br>
			• <a href="https://japan-avenue.com/blogs/japan/japanese-patterns" target="_blank">Japan avenue</a><br>
			• <a href="https://tankenjapan.com/25-common-japanese-patterns-and-their-meaning/" target="_blank">Tanken Japan</a><br>
			<br>
			Keyboard Shortcuts<br>
			• <span style="color:#8C5F37">0 > Reset</span><br>
			• <span style="color:#8C5F37">1 > Pattern 1</span><br>
			• <span style="color:#8C5F37">2 > Pattern 2</span><br>
			• <span style="color:#8C5F37">3 > Pattern 3</span><br>
			• <span style="color:#8C5F37">f > Front view</span><br>
			• <span style="color:#8C5F37">b > Back view</span><br>
			• <span style="color:#8C5F37">Mousewheel > Change pattern size</span><br>
		</div>
		<script>
			const div1=document.getElementById("div1");
			const div2=document.getElementById("div2");
			const smaller=document.getElementById("smaller");
			const bigger=document.getElementById("bigger");
			const froback=document.getElementById("froback");
			const inputDiv=document.querySelector(".input-div");
			const input=document.querySelector("input");
			const input2=document.getElementById("input2");
			
			let front=true;
			let oldURL=null;
			let size=60;

			function chgpat(a){div1.style.backgroundImage="url('pat"+a+".png')";}

			document.getElementById("but1").addEventListener("click",function(){chgpat(1);});
			document.getElementById("but2").addEventListener("click",function(){chgpat(2);});
			document.getElementById("but3").addEventListener("click",function(){chgpat(3);});

			inputDiv.addEventListener("drop",(e)=>{
				e.preventDefault();
				e.stopPropagation();
				const file=event.dataTransfer.files[0];
				let newURL=URL.createObjectURL(file);
				if(oldURL){URL.revokeObjectURL(oldURL);}
				oldURL=newURL;
				div1.style.backgroundImage=`url("${newURL}")`;
			});

			smaller.addEventListener("click",function(){size--;if(size<1){size=1};div1.style.backgroundSize=size+"px";});
			bigger.addEventListener("click",function(){size++;div1.style.backgroundSize=size+"px";});

			document.addEventListener("keypress",(event)=>{
				var name=event.key;
				var code=event.code;
				if(name=="-"){size--;div1.style.backgroundSize=size+"px";}
				if(name=="+"){size++;div1.style.backgroundSize=size+"px";}
				if(event.key=="0"){size=60;chgpat(0);div1.style.backgroundSize=size+"px";}
				if(name=="1"){chgpat(1);}
				if(name=="2"){chgpat(2);}
				if(name=="3"){chgpat(3);}
				if(name=="b"){div2.style.backgroundImage="url('back.png')";froback.innerHTML="Front view";front=false;}
				if(name=="f"){div2.style.backgroundImage="url('front.png')";froback.innerHTML="Back view";front=true;}
			}, false);
			
			froback.addEventListener("click",function(){if(front==true){div2.style.backgroundImage="url('back.png')";froback.innerHTML="Front view";front=false;}else{div2.style.backgroundImage="url('front.png')";froback.innerHTML="Back view";front=true;}});
			
			input.onchange=function(e){
				div1.style.backgroundImage="url('"+URL.createObjectURL(this.files[0])+"')";
			}

			document.getElementById("ok1").addEventListener("click",()=>{
				if(input2.value!=""){div1.style.backgroundImage="url('"+input2.value+"')";}
			})
			
			function myWheel(event) {
			var y = event.deltaY;
			if (y > 0) {
				size--;if(size<1){size=1};
			} else {
				size++;
			}
				div1.style.backgroundSize=size+"px";
			}
		</script>
	</body>
</html>